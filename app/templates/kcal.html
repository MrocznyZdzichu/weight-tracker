{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Kcal Info</h2>
  <form action="/kcal" method="post">
    <label>Nazwa produktu:
      <input type="text" name="product" value="{{ product or '' }}" placeholder="kinder bueno, chleb, ziemniaki, szynka">
    </label>
    <button type="submit" class="btn">Szukaj kalorii</button>
  </form>

  {% if error %}
    <p class="alert">{{ error }}</p>
  {% endif %}

  {% if results %}
    <ul>
    {% for r in results %}
      <li>
        <strong>{{ r.name }}</strong>
        <div>Kcal / 100 g: {% if r.kcal_100g is not none %}{{ r.kcal_100g }}{% else %}brak danych{% endif %}</div>
        <div>Kcal / sztuka: {% if r.kcal_per_piece is not none %}{{ r.kcal_per_piece }}{% else %}brak danych{% endif %}{% if r.serving_size %} (porcja: {{ r.serving_size }}){% endif %}</div>
        {% if r.source %}<div><a href="{{ r.source }}" target="_blank" rel="noopener">Źródło</a></div>{% endif %}
      </li>
    {% endfor %}
    </ul>
  {% endif %}
</div>
{% endblock %}
